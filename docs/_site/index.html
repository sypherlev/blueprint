<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
        <meta name="viewport" content="width=device-width">

        <title>sypherlev/blueprint : Blueprint Query Compiler</title>
        <meta name="description" content="A better SQL query compiler for managing complex data">

        <link href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.5/css/bootstrap.min.css" rel="stylesheet">
        <link rel="stylesheet" href="/css/syntax.css">
        <link rel="stylesheet" href="/css/main.css">
    </head>
    <body>

        <div class="container">
            <div class="row">
                <div id="header" class="col-sm-12">
                    <h4><a class="brand" href="/">sypherlev/blueprint</a>
    <small>A better SQL query compiler for managing complex data</small>
</h4>

                </div>
            </div>

            <div class="row">
                
                
                    <div id="navigation" class="col-sm-2">
                        <ul class="nav nav-list">
    <li><a href="/">Home</a></li>
    
        
        

        
    
        
        

        
            
                <li class="nav-header">The Query Builder</li>
            
            <li data-order=""><a href="/qb/the-query-builder.html">Basic Usage</a></li>
        
            
            <li data-order=""><a href="/qb/query-command-methods.html">Query Command Methods</a></li>
        
            
            <li data-order=""><a href="/qb/termination-methods.html">Termination Methods</a></li>
        
            
            <li data-order=""><a href="/qb/utility-and-debugging-methods.html">Utility and Debugging Methods</a></li>
        
    
        
        

        
            
                <li class="nav-header">Patterns</li>
            
            <li data-order=""><a href="/pat/pattern-methods.html">Pattern Methods</a></li>
        
            
            <li data-order=""><a href="/pat/using-patterns.html">Using Patterns</a></li>
        
    
        
        

        
            
                <li class="nav-header">Filters</li>
            
            <li data-order=""><a href="/fil/filter-methods.html">Filter Methods</a></li>
        
            
            <li data-order=""><a href="/fil/using-filters.html">Using Filters</a></li>
        
    
        
        

        
            
                <li class="nav-header">Transformations</li>
            
            <li data-order=""><a href="/tra/transformation-methods.html">Transformation Methods</a></li>
        
            
            <li data-order=""><a href="/tra/using-transformations.html">Using Transformations</a></li>
        
    
<!-- List additional links. It is recommended to add a divider
    e.g. <li class="divider"></li> first to break up the content. -->
</ul>

                    </div>

                    <div id="content" class="col-sm-10">
                        <h2 id="the-blueprint-query-compiler">The Blueprint Query Compiler</h2>

<p>Blueprint is an extended query builder that allows you to define, reuse, and override chunks of query code at will.</p>

<h3 id="background">Background</h3>

<p>ORMs such as Doctrine and Propel are based on the concept of mapping a record in a table to an object, with the columns becoming the object’s properties. This approach has many benefits - for example, it simplifies the codebase, and it’s more accessible to developers who are less familiar with SQL. It’s far less suitable for apps with large, complex data relationships, however, and many developers find the loss of flexibility and control to be annoying.</p>

<p>In short: working with an ORM pulls you away from the database, and this isn’t a good solution if you find yourself having to fight your way back to the database to get something done.</p>

<p>Query builders have their own issues. They’re close to the database, but the greater control means a greater number of things to stipulate. They speed up the creation of complete SQL commands, but if you’ve ever used one, you’ve probably gotten bored of writing the same CRUD functions over and over, or found you have a model class full of ten slightly different list methods, and changing one column name means an update to the code in fifty places.</p>

<p>Query builders take you too close to the database all the time, and they tend to lead to lots of copy-pasted code - or worse, SQL injection vulnerabilities.</p>

<p>I found that, while building a number of large, data-driven apps, an ORM just got in the way most of the time, while a query builder meant writing lots of difficult-to-maintain, possibly-insecure code. Having found nothing that could provide a happy medium, I came up with Blueprint.</p>

<h3 id="philosophy">Philosophy</h3>

<p>Blueprint is designed specifically for complex data manipulation. It was based on the concept that we should not treat relational data as objects; to do so effectively sacrifices the power of a relational database for the sake of making everything an object in the code. When you’re dealing with big datasets or a lot of complex operations, the constraints of making everything an object are unaffordable. Eager/lazy loading, object hydration, etc - these become a nightmare for a developer with a need for fine-grained control over how to manipulate half a million database records, or relationships that span five or six tables.</p>

<p>The only choice was basing it on a query builder, and there’s a pretty solid one built into it. Blueprint then extends the builder by making it easy to define, reuse, and override groups of commands. It has built-in table and column name validation, if you choose to use it. You’re always close to the database, and you can drop to raw SQL at any time. It allows for defined data transformations to be performed on query output.</p>

<p>It’s built using PDO, and currently supports MySQL/MariaDB. (It probably works with other SQL databases but I haven’t tested it yet.)</p>

<p>As it's purpose-built for managing and processing large blocks of complex relational data, Blueprint is not recommended for basic CRUD work.</p>

                    </div>
                
            </div>

            

            <div class="row">
                <div id="footer" class="col-sm-12">
                    Documentation for <a href="https://github.com/sypherlev/blueprint">sypherlev/blueprint</a>

                </div>
            </div>
        </div>

        <script>
            function orderNav() {
                var list,
                    section,
                    header,
                    sections = [],
                    lists = {},
                    headers = {};

                var navUl = document.querySelectorAll('#navigation ul')[0],
                    navLis = document.querySelectorAll('#navigation ul li');

                if (!navUl) return;

                for (var i = 0; i < navLis.length; i++) {
                    var order, li = navLis[i];

                    if (li.classList.contains('nav-header')) {
                        section = li.textContent || li.innerText;
                        sections.push(section);
                        headers[section] = li;
                        continue;
                    }

                    if (!lists[section]) {
                        lists[section] = [];
                    }

                    order = parseFloat(li.getAttribute('data-order'))
                    lists[section].push([order, li]);
                }

                for (var i = 0; i < sections.length; i++) {
                    section = sections[i];
                    list = lists[section].sort(function(a, b) {
                        return a[0] - b[0];
                    });

                    if (header = headers[section]) {
                        navUl.appendChild(header);
                    }
                    for (var j = 0; j < list.length; j++) {
                        navUl.appendChild(list[j][1]);
                    }
                }
            }

            if (document.querySelectorAll) orderNav();
        </script>
        
    </body>
</html>
